<!DOCTYPE html>
  
<html lang="en">
  
<head>
  
  <meta charset="UTF-8" />
  
  <title>AI Hand Drawing App</title>
  
  <style>
  
    body {
  
      margin: 0;
  
      background: #111;
  
      display: flex;
  
      justify-content: center;
  
      align-items: center;
  
      height: 100vh;
  
    }
  
    .wrapper {
  
      position: relative;
  
      width: 900px;
  
      height: 675px;
  
    }
  
    video, canvas {
  
      position: absolute;
  
      top: 0;
  
      left: 0;
  
      width: 900px;
  
      height: 675px;
  
      border-radius: 12px;
  
      transform: scaleX(-1);
  
    }
  
    .toolbar {
  
      position: absolute;
  
      top: 10px;
  
      left: 50%;
  
      transform: translateX(-50%);
  
      display: flex;
  
      gap: 8px;
  
      z-index: 10;
  
      pointer-events: none;
  
    }
  
    .tool {
  
      background: rgba(255,255,255,0.15);
  
      color: white;
  
      padding: 7px 12px;
  
      font-family: sans-serif;
  
      font-size: 14px;
  
      border-radius: 5px;
  
      pointer-events: none;
  
    }
  
    .active {
  
      background: rgba(0, 255, 0, 0.7);
  
    }
  
    .slider-container {
  
      position: absolute;
  
      bottom: 15px;
  
      left: 50%;
  
      transform: translateX(-50%);
  
      z-index: 10;
  
      color: white;
  
      font-family: sans-serif;
  
      display: flex;
  
      align-items: center;
  
      gap: 10px;
  
    }
  
    .color-dot {
  
      width: 18px;
  
      height: 18px;
  
      border-radius: 50%;
  
      border: 2px solid white;
  
    }
  
    .save-btn {
  
      background: #222;
  
      color: white;
  
      padding: 6px 12px;
  
      border: none;
  
      border-radius: 6px;
  
      cursor: pointer;
  
      font-family: sans-serif;
  
      font-size: 14px;
  
    }
  
  </style>
  
</head>
  
<body>
  
  <div class="wrapper">
  
    <video id="video" autoplay playsinline></video>
  
    <canvas id="output"></canvas>
  
    <canvas id="drawCanvas"></canvas>
  

  
    <div class="toolbar">
  
      <div id="pen" class="tool active">Pen</div>
  
      <div id="eraser" class="tool">Eraser</div>
  
      <div id="color" class="tool">Color</div>
  
      <div id="reset" class="tool">Reset</div>
  
      <div class="color-dot" id="colorDot"></div>
  
      <button class="save-btn" id="saveBtn">ðŸ’¾ Save</button>
  
    </div>
  

  
    <div class="slider-container">
  
      Brush Size:
  
      <input type="range" min="5" max="50" value="12" id="sizeSlider">
  
    </div>
  
  </div>
  

  
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  

  
  <script>
  
    const WIDTH = 900, HEIGHT = 675;
  
    const video = document.getElementById('video');
  
    const outputCanvas = document.getElementById('output');
  
    const drawCanvas = document.getElementById('drawCanvas');
  
    const outputCtx = outputCanvas.getContext('2d');
  
    const drawCtx = drawCanvas.getContext('2d');
  

  
    outputCanvas.width = drawCanvas.width = WIDTH;
  
    outputCanvas.height = drawCanvas.height = HEIGHT;
  

  
    const penBtn = document.getElementById('pen');
  
    const eraserBtn = document.getElementById('eraser');
  
    const colorBtn = document.getElementById('color');
  
    const resetBtn = document.getElementById('reset');
  
    const saveBtn = document.getElementById('saveBtn');
  
    const colorDot = document.getElementById('colorDot');
  
    const sizeSlider = document.getElementById('sizeSlider');
  

  
    const tools = [penBtn, eraserBtn, colorBtn, resetBtn];
  
    const colors = ['red', 'blue', 'lime', 'yellow', 'white', 'orange', 'cyan'];
  
    let currentColor = 'red';
  
    let colorIndex = 0;
  
    let tool = 'pen';
  
    let brushSize = parseInt(sizeSlider.value);
  

  
    let lastX = null, lastY = null;
  

  
    function activate(btn) {
  
      tools.forEach(b => b.classList.remove('active'));
  
      btn.classList.add('active');
  
    }
  

  
    function getAbsolute(x, y) {
  
      const rect = outputCanvas.getBoundingClientRect();
  
      return { absX: rect.left + (WIDTH - x), absY: rect.top + y };
  
    }
  

  
    function isHovering(absX, absY, el) {
  
      const rect = el.getBoundingClientRect();
  
      return absX >= rect.left && absX <= rect.right && absY >= rect.top && absY <= rect.bottom;
  
    }
  

  
    colorDot.style.background = currentColor;
  

  
    sizeSlider.oninput = () => brushSize = parseInt(sizeSlider.value);
  

  
    saveBtn.onclick = () => {
  
      const link = document.createElement('a');
  
      link.download = 'drawing.png';
  
      link.href = drawCanvas.toDataURL();
  
      link.click();
  
    };
  

  
    const hands = new Hands({
  
      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
  
    });
  

  
    hands.setOptions({
  
      maxNumHands: 1,
  
      modelComplexity: 1,
  
      minDetectionConfidence: 0.7,
  
      minTrackingConfidence: 0.5
  
    });
  

  
    hands.onResults(results => {
  
      outputCtx.clearRect(0, 0, WIDTH, HEIGHT);
  
      outputCtx.drawImage(results.image, 0, 0, WIDTH, HEIGHT);
  

  
      if (results.multiHandLandmarks.length === 0) {
  
        lastX = lastY = null;
  
        return;
  
      }
  

  
      const lm = results.multiHandLandmarks[0];
  
      drawConnectors(outputCtx, lm, HAND_CONNECTIONS, { color: '#00FF00', lineWidth: 2 });
  
      drawLandmarks(outputCtx, lm, { color: '#FF0000', radius: 4 });
  

  
      const index = lm[8], thumb = lm[4];
  
      const x = index.x * WIDTH, y = index.y * HEIGHT;
  
      const tx = thumb.x * WIDTH, ty = thumb.y * HEIGHT;
  
      const dist = Math.hypot(x - tx, y - ty);
  
      const pinching = dist < 40;
  

  
      const { absX, absY } = getAbsolute(x, y);
  

  
      if (pinching) {
  
        if (isHovering(absX, absY, resetBtn)) {
  
          drawCtx.clearRect(0, 0, WIDTH, HEIGHT);
  
          lastX = lastY = null;
  
          return;
  
        }
  
        if (isHovering(absX, absY, penBtn)) {
  
          tool = 'pen'; activate(penBtn);
  
          lastX = lastY = null;
  
          return;
  
        }
  
        if (isHovering(absX, absY, eraserBtn)) {
  
          tool = 'eraser'; activate(eraserBtn);
  
          lastX = lastY = null;
  
          return;
  
        }
  
        if (isHovering(absX, absY, colorBtn)) {
  
          colorIndex = (colorIndex + 1) % colors.length;
  
          currentColor = colors[colorIndex];
  
          colorDot.style.background = currentColor;
  
          activate(colorBtn);
  
          tool = 'pen';
  
          lastX = lastY = null;
  
          return;
  
        }
  

  
        if (lastX !== null) {
  
          drawCtx.beginPath();
  
          drawCtx.moveTo(lastX, lastY);
  
          drawCtx.lineTo(x, y);
  
          drawCtx.strokeStyle = tool === 'eraser' ? 'black' : currentColor;
  
          drawCtx.lineWidth = brushSize;
  
          drawCtx.lineCap = 'round';
  
          drawCtx.stroke();
  
        }
  

  
        lastX = x; lastY = y;
  
      } else {
  
        lastX = lastY = null;
  
      }
  
    });
  

  
    const camera = new Camera(video, {
  
      onFrame: async () => await hands.send({ image: video }),
  
      width: WIDTH,
  
      height: HEIGHT
  
    });
  
    camera.start();
  
  </script>
  
</body>
  
</html>
